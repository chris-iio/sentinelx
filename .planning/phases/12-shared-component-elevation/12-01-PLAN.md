---
phase: 12-shared-component-elevation
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - app/static/src/input.css
  - app/static/dist/style.css
autonomous: true
requirements:
  - COMP-01
  - COMP-02
  - COMP-03

must_haves:
  truths:
    - "All five verdict badge states (malicious, suspicious, clean, no_data, error) in BOTH badge systems (.verdict-label--* and .verdict-badge .verdict-*) show tinted-background + colored-border + colored-text"
    - "Every interactive element shows a 2px teal outline with 2px offset on keyboard focus (:focus-visible) — no box-shadow focus indicators remain"
    - "Three visually distinct button variants exist: primary (emerald), secondary (zinc), ghost (transparent + border) — each with hover and disabled states"
  artifacts:
    - path: "app/static/src/input.css"
      provides: "Unified verdict badges, global focus ring, ghost button variant"
      contains: ".btn-ghost"
    - path: "app/static/dist/style.css"
      provides: "Compiled CSS output"
  key_links:
    - from: "app/static/src/input.css @layer base :focus-visible"
      to: "all interactive elements"
      via: "global outline rule"
      pattern: ":focus-visible.*outline.*var\\(--accent-interactive\\)"
    - from: "app/static/src/input.css .verdict-badge"
      to: "verdict badge border"
      via: "border: 1px solid transparent"
      pattern: "\\.verdict-badge.*border.*1px.*solid"
---

<objective>
Elevate the three core CSS component systems: unify verdict badges with the tinted-bg + colored-border + colored-text triple pattern, standardize focus rings to use `:focus-visible` with teal outline, and create the ghost button variant.

Purpose: These are the foundational CSS primitives that all pages depend on. Verdict badges appear on results page IOC cards and enrichment slots. Focus rings affect every interactive element. Button variants are used on input, results, and settings pages.

Output: Updated `input.css` with unified badge borders, global `:focus-visible` rule, ghost button variant, and compiled `dist/style.css`.
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-shared-component-elevation/12-RESEARCH.md

<interfaces>
<!-- Key CSS structure in input.css the executor needs to understand -->

From app/static/src/input.css — TWO verdict badge systems:

System 1 — .verdict-label--* (Jinja2 rendered in IOC card headers, lines 787-802):
  Already has border: 1px solid var(--verdict-*-border) on all 5 states. NO CHANGES NEEDED.

System 2 — .verdict-badge .verdict-* (JS-applied in enrichment slots, lines 905-920):
  .verdict-badge base class (line 905-914): NO border property — MUST ADD.
  .verdict-malicious through .verdict-error (lines 916-920): Have bg + color only — MUST ADD border-color.

From app/static/src/input.css — Three focus overrides to replace:
  Line 271: .ioc-textarea:focus { outline: none; border-color: var(--accent-ipv4); box-shadow: 0 0 0 3px rgba(74, 158, 255, 0.1); }
  Line 314: .mode-toggle-track:focus { outline: none; box-shadow: 0 0 0 3px rgba(74, 158, 255, 0.25); }
  Line 707: .filter-search-input:focus { outline: none; border-color: var(--accent-ipv4); box-shadow: 0 0 0 3px rgba(74, 158, 255, 0.1); }

From app/static/src/input.css — Button system (lines 368-446):
  .btn (base), .btn-primary, .btn-primary:hover:not(:disabled), .btn-primary:disabled
  .btn-secondary, .btn-secondary:hover — MISSING :disabled state
  .btn-copy, .btn-export — leave unchanged (micro-action buttons, not COMP-03 scope)
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Unify verdict badge borders (COMP-01)</name>
  <files>app/static/src/input.css</files>
  <action>
Add `border: 1px solid transparent;` to the `.verdict-badge` base class (around line 905-914) for layout stability. Then add `border-color: var(--verdict-*-border);` to each of the five `.verdict-*` classes (lines 916-920).

The five classes to update are:
- `.verdict-malicious` — add `border-color: var(--verdict-malicious-border);`
- `.verdict-suspicious` — add `border-color: var(--verdict-suspicious-border);`
- `.verdict-clean` — add `border-color: var(--verdict-clean-border);`
- `.verdict-no_data` — add `border-color: var(--verdict-no-data-border);`
- `.verdict-error` — add `border-color: var(--verdict-error-border);`

DO NOT modify the `.verdict-label--*` system (lines 787-802) — it already has the correct triple pattern with border.

After editing, run `make css` to rebuild `dist/style.css`.

Verify with:
```bash
grep -n 'border.*solid\|border-color.*verdict' app/static/src/input.css | grep -A1 'verdict-badge\|verdict-malicious\|verdict-suspicious\|verdict-clean\|verdict-no_data\|verdict-error'
```
  </action>
  <verify>
    <automated>cd /home/chris/projects/sentinelx && grep -c 'border-color.*verdict' app/static/src/input.css | grep -q '[5-9]\|1[0-9]' && echo "PASS: verdict border-color rules found" || echo "FAIL: missing verdict border rules"</automated>
  </verify>
  <done>All five `.verdict-*` enrichment badge classes have `border-color` property referencing verdict triple tokens. The `.verdict-badge` base class has `border: 1px solid transparent`. `make css` succeeds.</done>
</task>

<task type="auto">
  <name>Task 2: Standardize focus rings with global :focus-visible rule (COMP-02)</name>
  <files>app/static/src/input.css</files>
  <action>
**Step 1: Add global focus ring rule** in the existing `@layer base {}` block (after the `body` rule, around line 129):

```css
:focus-visible {
    outline: 2px solid var(--accent-interactive);
    outline-offset: 2px;
}
```

**Step 2: Replace `.ioc-textarea:focus`** (line 271-275) with:
```css
.ioc-textarea:focus-visible {
    border-color: var(--accent-interactive);
    box-shadow: none;
}
```
Remove `outline: none` — the global rule provides the outline. Change `border-color` from `var(--accent-ipv4)` to `var(--accent-interactive)` (teal, not blue). Add `box-shadow: none` to suppress any `@tailwindcss/forms` box-shadow.

**Step 3: Replace `.mode-toggle-track:focus`** (line 314-317) with:
```css
.mode-toggle-track:focus-visible {
    box-shadow: none;
}
```
Remove `outline: none` — global rule handles it. Remove the old blue box-shadow.

**Step 4: Replace `.filter-search-input:focus`** (line 707-711) with:
```css
.filter-search-input:focus-visible {
    border-color: var(--accent-interactive);
    box-shadow: none;
}
```
Same pattern as textarea — change to `:focus-visible`, switch border-color to teal, suppress box-shadow.

After all changes, run `make css`.

IMPORTANT: Do NOT add `outline: none` anywhere. The global `:focus-visible` rule IS the focus indicator. Component rules only add supplementary styling (border-color shift).
  </action>
  <verify>
    <automated>cd /home/chris/projects/sentinelx && grep -c 'outline: none' app/static/src/input.css | xargs -I{} test {} -eq 0 && grep -q ':focus-visible' app/static/src/input.css && grep -q 'accent-interactive' app/static/src/input.css && echo "PASS: focus rings standardized" || echo "FAIL: focus ring issues"</automated>
  </verify>
  <done>Zero instances of `outline: none` in input.css. A global `:focus-visible` rule exists in `@layer base` with `outline: 2px solid var(--accent-interactive)`. All three component `:focus` selectors replaced with `:focus-visible`. `make css` succeeds.</done>
</task>

<task type="auto">
  <name>Task 3: Add ghost button variant and secondary disabled state (COMP-03)</name>
  <files>app/static/src/input.css</files>
  <action>
**Step 1: Add `.btn-ghost` variant** after the `.btn-secondary:hover` rule (around line 411):

```css
.btn-ghost {
    background-color: transparent;
    color: var(--text-secondary);
    border-color: var(--border-default);
}

.btn-ghost:hover:not(:disabled) {
    background-color: var(--bg-hover);
    border-color: var(--border-hover);
    color: var(--text-primary);
}

.btn-ghost:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}
```

**Step 2: Add `.btn-secondary:disabled`** state after `.btn-secondary:hover` (the hover is around line 408-411):

```css
.btn-secondary:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}
```

**Step 3: Add `color` to the `.btn` base transition** (line 381):
Change `transition: background-color 0.15s ease, border-color 0.15s ease;`
To: `transition: background-color 0.15s ease, border-color 0.15s ease, color 0.15s ease;`

This enables smooth color transitions on all button variants (especially ghost hover).

After changes, run `make css`.

DO NOT modify `.btn-copy` or `.btn-export` — they serve micro-action purposes and are not part of the primary/secondary/ghost system per research recommendation.
  </action>
  <verify>
    <automated>cd /home/chris/projects/sentinelx && grep -q 'btn-ghost' app/static/src/input.css && grep -q 'btn-secondary:disabled' app/static/src/input.css && make css 2>&1 | tail -1</automated>
  </verify>
  <done>`.btn-ghost` variant exists with hover and disabled states. `.btn-secondary:disabled` exists. `.btn` base transition includes `color`. `make css` succeeds. All 3 button variants (primary, secondary, ghost) are distinct.</done>
</task>

</tasks>

<verification>
After all 3 tasks:
1. `make css` completes without errors
2. `grep -c 'outline: none' app/static/src/input.css` returns 0
3. `grep 'btn-ghost\|btn-secondary:disabled\|:focus-visible\|verdict.*border-color' app/static/src/input.css` shows all expected patterns
4. `pytest tests/ --ignore=tests/e2e -x -q` passes (no template changes, CSS-only — should be zero regressions)
</verification>

<success_criteria>
- All `.verdict-*` enrichment badge classes have border-color matching their verdict triple token
- Zero `outline: none` statements remain in input.css
- Global `:focus-visible` rule uses `var(--accent-interactive)` with 2px outline and 2px offset
- `.btn-ghost` variant defined with hover and disabled states
- `.btn-secondary:disabled` defined
- `make css` succeeds
- Unit/integration tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/12-shared-component-elevation/12-01-SUMMARY.md`
</output>
