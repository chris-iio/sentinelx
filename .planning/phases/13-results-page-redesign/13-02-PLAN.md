---
phase: 13-results-page-redesign
plan: 02
type: execute
wave: 2
depends_on: ["13-01"]
files_modified:
  - app/static/src/input.css
  - app/static/dist/style.css
  - app/templates/macros/icons.html
  - app/templates/partials/_filter_bar.html
autonomous: true
requirements:
  - RESULTS-02
  - RESULTS-03
  - RESULTS-04
  - RESULTS-08

must_haves:
  truths:
    - "Hovering an IOC card produces a visible lift effect (translateY + shadow) within 150ms"
    - "Each IOC type badge shows a colored dot before the type label"
    - "Search input has a magnifying glass icon prefix"
    - "IOC cards have a 3px left-border accent in verdict color"
  artifacts:
    - path: "app/static/src/input.css"
      provides: "Card hover lift, dot indicator, search icon prefix, left border CSS"
      contains: "translateY(-1px)"
    - path: "app/templates/macros/icons.html"
      provides: "magnifying-glass icon in icon macro"
      contains: "magnifying-glass"
    - path: "app/templates/partials/_filter_bar.html"
      provides: "Search input with icon prefix wrapper"
      contains: "filter-search-icon"
  key_links:
    - from: "app/templates/partials/_filter_bar.html"
      to: "app/templates/macros/icons.html"
      via: "{{ icon('magnifying-glass') }} macro call"
      pattern: "icon.*magnifying-glass"
    - from: "app/static/src/input.css"
      to: "app/templates/partials/_ioc_card.html"
      via: ".ioc-card:hover CSS selector"
      pattern: "ioc-card:hover"
---

<objective>
Add card hover elevation, type badge dot indicators, search icon prefix, and verify left-border accent — four CSS-driven visual enhancements to the results page IOC cards and filter bar.

Purpose: These are the "polish" features that make the card grid feel interactive and scannable. Card hover lift provides tactile feedback, dots enable quick type identification without reading text, and the search icon follows the standard search input convention.

Output: Updated CSS with new rules, icon macro with magnifying-glass, filter bar partial with icon prefix.
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-results-page-redesign/13-RESEARCH.md
@.planning/phases/13-results-page-redesign/13-01-SUMMARY.md
@app/static/src/input.css
@app/templates/macros/icons.html
@app/templates/partials/_filter_bar.html

<interfaces>
<!-- Existing CSS tokens used by these features:
     --bg-hover: #3f3f46 (zinc-700)
     --border: rgba(255,255,255,0.06)
     --border-hover: rgba(255,255,255,0.18)
     --text-muted: #71717a (zinc-500)
     --accent-interactive: #14b8a6 (teal-500)
     --radius-sm: 4px
     --font-mono: 'JetBrains Mono Variable', monospace

     IOC type accent colors (used by dot indicators via currentColor):
     --accent-ipv4, --accent-ipv6, --accent-domain, --accent-url,
     --accent-md5, --accent-sha1, --accent-sha256, --accent-cve

     Existing verdict left border (RESULTS-08 — already implemented):
     .ioc-card { border-left: 3px solid var(--border); }
     .ioc-card[data-verdict="malicious"] { border-left-color: var(--verdict-malicious-border); }
     (etc. for suspicious, clean, no_data, error)

     Icon macro signature:
     {% macro icon(name, class="w-4 h-4", aria_label=none) -%}
     Currently supports: "shield-check", "cog-6-tooth" (solid, fill="currentColor")
     magnifying-glass requires outline variant (stroke, not fill)
-->
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add card hover lift, dot indicators, and search icon CSS + icon macro</name>
  <files>
    app/static/src/input.css,
    app/templates/macros/icons.html,
    app/templates/partials/_filter_bar.html
  </files>
  <action>
    **A. Card Hover Lift (RESULTS-02)**

    Update `.ioc-card` in `input.css` to extend its existing `transition` property and add a `:hover` rule:

    Change the existing `.ioc-card` transition from:
    ```css
    transition: border-left-color 0.2s ease;
    ```
    To:
    ```css
    transition: border-left-color 0.2s ease, transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;
    ```

    Add a new `.ioc-card:hover` rule after the existing `.ioc-card` block:
    ```css
    .ioc-card:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        border-color: var(--border-hover);
    }
    ```

    **B. IOC Type Badge Dot Indicator (RESULTS-03)**

    Add a `::before` pseudo-element to `.ioc-type-badge`. Since each `.ioc-type-badge--{type}` variant already sets `color` to the type accent color, using `background-color: currentColor` on the dot will automatically pick up the right color per type — no per-type overrides needed.

    First change `.ioc-type-badge` from `display: inline-block` to `display: inline-flex; align-items: center;` so the dot aligns properly.

    Add after the `.ioc-type-badge` block:
    ```css
    .ioc-type-badge::before {
        content: "";
        display: inline-block;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background-color: currentColor;
        margin-right: 4px;
        flex-shrink: 0;
    }
    ```

    **C. Search Icon Prefix (RESULTS-04)**

    1. Add `magnifying-glass` to the icon macro in `macros/icons.html`. The magnifying-glass is an outline icon in Heroicons v2, requiring `stroke` instead of `fill`. Add a `variant` parameter to the macro to support both solid (fill) and outline (stroke) icons.

    Update the macro signature and SVG wrapper to:
    ```jinja2
    {% macro icon(name, class="w-4 h-4", aria_label=none, variant="solid") -%}
    <svg xmlns="http://www.w3.org/2000/svg"
         viewBox="0 0 24 24"
         {% if variant == "outline" %}fill="none" stroke="currentColor" stroke-width="1.5"{% else %}fill="currentColor"{% endif %}
         class="{{ class }}"
         {% if aria_label %}aria-label="{{ aria_label }}"{% else %}aria-hidden="true"{% endif %}
    >
    ```

    Add the magnifying-glass path before the `{% endif %}` at the end:
    ```jinja2
    {% elif name == "magnifying-glass" %}
    <path stroke-linecap="round" stroke-linejoin="round"
          d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"/>
    ```

    2. Update `_filter_bar.html` to wrap the search input in a relative-positioned wrapper with the icon. Import the icon macro at the top of the partial:
    ```jinja2
    {% from "macros/icons.html" import icon %}
    ```

    Change the `.filter-search` div content from:
    ```html
    <div class="filter-search">
      <input type="search" id="filter-search-input" placeholder="Search IOCs..." class="filter-search-input" autocomplete="off" />
    </div>
    ```
    To:
    ```html
    <div class="filter-search">
      <div class="filter-search-wrapper">
        {{ icon("magnifying-glass", class="filter-search-icon", variant="outline") }}
        <input type="search" id="filter-search-input" placeholder="Search IOCs..." class="filter-search-input" autocomplete="off" />
      </div>
    </div>
    ```

    3. Add CSS for the search icon wrapper and icon in `input.css`:
    ```css
    .filter-search-wrapper {
        position: relative;
        display: inline-flex;
        align-items: center;
        width: 100%;
        max-width: 300px;
    }

    .filter-search-icon {
        position: absolute;
        left: 0.6rem;
        width: 14px;
        height: 14px;
        color: var(--text-muted);
        pointer-events: none;
        flex-shrink: 0;
    }
    ```

    Update the existing `.filter-search-input` rule to add `padding-left: 2rem;` (increase from `0.75rem` to `2rem` to clear the icon). Also move `max-width: 300px` from `.filter-search-input` to `.filter-search-wrapper` (already done above) and set `.filter-search-input` to `width: 100%; max-width: none;` since the wrapper now controls the width.

    **D. Left-Border Accent Verification (RESULTS-08)**

    Verify the existing `.ioc-card` CSS already has:
    - `border-left: 3px solid var(--border);` on `.ioc-card`
    - `border-left-color: var(--verdict-malicious-border)` on `.ioc-card[data-verdict="malicious"]`
    - Same pattern for suspicious, clean, no_data, error

    If this is already in place (it is per the research), no CSS changes needed for RESULTS-08. Document in the summary that RESULTS-08 was already implemented in the base `.ioc-card` CSS from prior phases.

    **E. Build CSS**

    Run `make css` to regenerate `app/static/dist/style.css`.
  </action>
  <verify>
    <automated>cd /home/chris/projects/sentinelx && make css && python3 -m pytest tests/e2e/ -q -x 2>&1 | tail -20</automated>
  </verify>
  <done>
    1. `.ioc-card:hover` produces visible lift (translateY + shadow) — RESULTS-02 done
    2. `.ioc-type-badge::before` shows 6px colored dot — RESULTS-03 done
    3. Search input has magnifying-glass SVG prefix with padding — RESULTS-04 done
    4. Left-border accent already implemented — RESULTS-08 confirmed
    5. All E2E tests pass (except 2 known VT API key failures)
    6. `make css` succeeds, dist/style.css regenerated
  </done>
</task>

</tasks>

<verification>
Run E2E tests and visually verify CSS changes:

```bash
cd /home/chris/projects/sentinelx && make css && python3 -m pytest tests/e2e/ -q
```

Verify the icon macro works:
```bash
grep -n "magnifying-glass" app/templates/macros/icons.html
```

Verify hover lift CSS exists:
```bash
grep -n "translateY" app/static/src/input.css
```

Verify dot indicator CSS exists:
```bash
grep -n "ioc-type-badge::before" app/static/src/input.css
```
</verification>

<success_criteria>
1. Hovering an IOC card visually lifts it (translateY + shadow + border-color shift)
2. Each type badge shows a colored dot before the label text
3. Search input has a magnifying glass SVG icon at the left
4. 3px left-border accent on IOC cards in verdict color is present (existing, confirmed)
5. All E2E tests pass (except 2 known VT API key failures)
6. `make css` builds successfully
</success_criteria>

<output>
After completion, create `.planning/phases/13-results-page-redesign/13-02-SUMMARY.md`
</output>
