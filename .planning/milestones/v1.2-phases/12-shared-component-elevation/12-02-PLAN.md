---
phase: 12-shared-component-elevation
plan: "02"
type: execute
wave: 2
depends_on:
  - "12-01"
files_modified:
  - app/static/src/input.css
  - app/static/dist/style.css
autonomous: true
requirements:
  - COMP-04
  - COMP-05

must_haves:
  truths:
    - "Form inputs (textarea, text inputs, password fields) have dark zinc background, token-based border, and teal focus border — no light-theme @tailwindcss/forms defaults bleed through"
    - "The sticky filter bar shows a frosted-glass blur effect — content scrolling behind it is visibly blurred through the semi-transparent background"
  artifacts:
    - path: "app/static/src/input.css"
      provides: ".form-input dark-theme class, frosted filter bar"
      contains: ".form-input"
    - path: "app/static/dist/style.css"
      provides: "Compiled CSS output"
  key_links:
    - from: "app/static/src/input.css .filter-bar-wrapper"
      to: "backdrop-filter visual effect"
      via: "semi-transparent background + backdrop-filter"
      pattern: "backdrop-filter.*blur"
    - from: "app/static/src/input.css .form-input"
      to: "settings page input fields"
      via: "CSS class applied in templates"
      pattern: "\\.form-input"
---

<objective>
Add dark-theme form element styling and the frosted-glass filter bar backdrop effect.

Purpose: COMP-04 ensures form inputs across all pages (textarea, text inputs, password field on settings) use consistent dark-theme styling via `@tailwindcss/forms` overrides. COMP-05 upgrades the sticky filter bar from an opaque background to a frosted-glass effect, a hallmark of premium dark UIs.

Output: Updated `input.css` with `.form-input` class and frosted `.filter-bar-wrapper`, compiled `dist/style.css`.
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-shared-component-elevation/12-RESEARCH.md
@.planning/phases/12-shared-component-elevation/12-01-SUMMARY.md

<interfaces>
<!-- From Plan 01 — the global :focus-visible rule is now in @layer base -->
<!-- Form elements will automatically get teal focus outlines from the global rule -->
<!-- Component-level :focus-visible rules add supplementary border-color shift only -->

From app/static/src/input.css — existing .ioc-textarea (lines 256-269):
  Already styled with dark bg/color/border. Its :focus-visible was updated in Plan 01.

From app/static/src/input.css — .filter-bar-wrapper (lines 569-577):
  position: sticky; top: 0; z-index: 10;
  background-color: var(--bg-primary);  /* OPAQUE — must become semi-transparent */
  padding: 0.75rem 0;
  border-bottom: 1px solid var(--border);
  margin-bottom: 1rem;

From app/templates/settings.html:
  The settings page has <input type="password"> for the API key.
  Currently no custom CSS class — just browser defaults + @tailwindcss/forms reset.
  Phase 14 will apply .form-input class, but the CSS rule must exist first.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add .form-input dark-theme styling (COMP-04)</name>
  <files>app/static/src/input.css</files>
  <action>
Add a `.form-input` class in the `@layer components` section, after the `.form-label` rule (around line 254). This provides dark-theme styling for text inputs, password fields, and any future form fields.

```css
.form-input {
    width: 100%;
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-sm);
    padding: 0.5rem 0.75rem;
    font-family: var(--font-ui);
    font-size: 0.875rem;
    line-height: 1.5;
    transition: border-color 0.15s ease;
}

.form-input:focus-visible {
    border-color: var(--accent-interactive);
    box-shadow: none;
}

.form-input::placeholder {
    color: var(--text-muted);
    opacity: 1;
}

.form-input:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}
```

This class uses `var(--bg-tertiary)` (zinc-800) for the input background, matching the `.ioc-textarea` pattern but with `--bg-tertiary` instead of `--bg-primary` for visual depth on card surfaces.

The `:focus-visible` rule adds `border-color: var(--accent-interactive)` as supplementary styling. The teal outline comes from the global `:focus-visible` rule added in Plan 01.

`box-shadow: none` explicitly overrides any `@tailwindcss/forms` ring that might persist. After `make css`, inspect the compiled output to verify no competing `--tw-ring-*` values override the outline.

DO NOT apply `.form-input` to any templates in this task — that is Phase 14 scope (COMP-04 only creates the CSS class). The `.ioc-textarea` already has its own styling and should NOT be changed to `.form-input`.

Run `make css` after editing.
  </action>
  <verify>
    <automated>cd /home/chris/projects/sentinelx && grep -q '.form-input' app/static/src/input.css && grep -q 'form-input:focus-visible' app/static/src/input.css && make css 2>&1 | tail -1</automated>
  </verify>
  <done>`.form-input` class exists in `@layer components` with dark bg, token-based border, `:focus-visible` border-color, placeholder, and disabled states. `make css` succeeds.</done>
</task>

<task type="auto">
  <name>Task 2: Add frosted-glass backdrop to filter bar (COMP-05)</name>
  <files>app/static/src/input.css</files>
  <action>
Modify the existing `.filter-bar-wrapper` rule (around line 569-577) to add frosted-glass effect:

**Change:**
```css
background-color: var(--bg-primary);
```

**To:**
```css
background-color: rgba(9, 9, 11, 0.85);
backdrop-filter: blur(12px);
-webkit-backdrop-filter: blur(12px);
```

The background changes from opaque `var(--bg-primary)` (#09090b) to `rgba(9, 9, 11, 0.85)` — the same zinc-950 color at 85% opacity. This allows `backdrop-filter: blur(12px)` to produce the frosted-glass effect on content scrolling behind the bar.

The `-webkit-backdrop-filter` prefix is required for Safari 15.x compatibility.

CRITICAL: If the background stays fully opaque, `backdrop-filter` is visually invisible — nothing bleeds through to be blurred. The `rgba()` alpha value is essential.

Also check the responsive `.filter-bar-wrapper` override at the bottom of the file (around line 998-1000) — it only changes padding, so it does not need modification.

Run `make css` after editing.
  </action>
  <verify>
    <automated>cd /home/chris/projects/sentinelx && grep -q 'backdrop-filter' app/static/src/input.css && grep -q 'rgba(9, 9, 11' app/static/src/input.css && grep -q 'webkit-backdrop-filter' app/static/src/input.css && echo "PASS: frosted glass CSS present" || echo "FAIL: missing backdrop-filter rules"</automated>
  </verify>
  <done>`.filter-bar-wrapper` uses `rgba(9, 9, 11, 0.85)` background with `backdrop-filter: blur(12px)` and `-webkit-backdrop-filter: blur(12px)`. The old opaque `var(--bg-primary)` is removed. `make css` succeeds.</done>
</task>

</tasks>

<verification>
After both tasks:
1. `make css` completes without errors
2. `grep '.form-input' app/static/src/input.css` shows the new class
3. `grep 'backdrop-filter' app/static/src/input.css` shows blur(12px)
4. `grep 'var(--bg-primary)' app/static/src/input.css` should NOT match inside `.filter-bar-wrapper` (replaced with rgba)
5. `pytest tests/ --ignore=tests/e2e -x -q` passes (CSS-only changes, zero regressions expected)
</verification>

<success_criteria>
- `.form-input` class defined with dark-theme bg, border, focus, placeholder, and disabled states
- `.filter-bar-wrapper` uses semi-transparent rgba background with backdrop-filter blur
- Both `backdrop-filter` and `-webkit-backdrop-filter` properties present
- `make css` succeeds
- Unit/integration tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/12-shared-component-elevation/12-02-SUMMARY.md`
</output>
